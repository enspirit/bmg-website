---
title: constants
---

import { Tabs, TabItem } from '@astrojs/starlight/components';

<Tabs syncKey="lang">
  <TabItem label="Ruby">
```ruby
rel.constants(status: "active")
rel.constants(version: 1, source: "api")
```
  </TabItem>
  <TabItem label="TypeScript">
```typescript
rel.constants({ status: "active" })
rel.constants({ version: 1, source: "api" })
```
  </TabItem>
</Tabs>

### Problem

Add fixed-value attributes to every tuple in a relation.

Example: *I want to tag all records from a particular data source with a constant identifier.*

### Description

The `constants` operator extends each tuple with new attributes that have the same value for every tuple. This is a specialized form of `extend` optimized for static values rather than computed ones.

Unlike `extend`, which can compute values from other attributes, `constants` simply merges the provided values into each tuple. This makes it more efficient when you just need to add fixed metadata or tags.

### Requirements

No special requirements. Works on any relation.

### Examples

#### Adding a single constant

<Tabs syncKey="lang">
  <TabItem label="Ruby">
```ruby
data = Bmg::Relation.new([
  { id: 1, name: "Alice" },
  { id: 2, name: "Bob" }
])

data.constants(active: true).to_a

=>
[{:id=>1, :name=>"Alice", :active=>true},
 {:id=>2, :name=>"Bob", :active=>true}]
```
  </TabItem>
  <TabItem label="TypeScript">
```typescript
const data = Bmg([
  { id: 1, name: "Alice" },
  { id: 2, name: "Bob" }
])

data.constants({ active: true }).toArray()

// =>
// [{ id: 1, name: "Alice", active: true },
//  { id: 2, name: "Bob", active: true }]
```
  </TabItem>
</Tabs>

#### Multiple constants

<Tabs syncKey="lang">
  <TabItem label="Ruby">
```ruby
records = Bmg::Relation.new([
  { id: 1, value: 100 },
  { id: 2, value: 200 }
])

records.constants(
  source: "import",
  version: 2,
  processed_at: "2024-01-15"
).to_a

=>
[{:id=>1, :value=>100, :source=>"import", :version=>2, :processed_at=>"2024-01-15"},
 {:id=>2, :value=>200, :source=>"import", :version=>2, :processed_at=>"2024-01-15"}]
```
  </TabItem>
  <TabItem label="TypeScript">
```typescript
const records = Bmg([
  { id: 1, value: 100 },
  { id: 2, value: 200 }
])

records.constants({
  source: "import",
  version: 2,
  processed_at: "2024-01-15"
}).toArray()

// =>
// [{ id: 1, value: 100, source: "import", version: 2, processed_at: "2024-01-15" },
//  { id: 2, value: 200, source: "import", version: 2, processed_at: "2024-01-15" }]
```
  </TabItem>
</Tabs>

### Comparison with extend

| Operator | Use case | Values |
|----------|----------|--------|
| `constants` | Add fixed metadata | Same value for all tuples |
| `extend` | Compute new attributes | Different value per tuple |

<Tabs syncKey="lang">
  <TabItem label="Ruby">
```ruby
# constants: same value everywhere
rel.constants(version: 1)

# extend: computed per tuple
rel.extend(doubled: ->(t) { t[:value] * 2 })
```
  </TabItem>
  <TabItem label="TypeScript">
```typescript
// constants: same value everywhere
rel.constants({ version: 1 })

// extend: computed per tuple
rel.extend({ doubled: t => t.value * 2 })
```
  </TabItem>
</Tabs>

Use `constants` when adding static values - it's simpler and may be more efficient than `extend` with a constant function.
